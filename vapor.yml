id: 18940
name: Testing
environments:
  testing:
    memory: 1024
    cli-memory: 512
    runtime: 'php-7.4:al2'
    timeout: 5
    build:
      - 'composer install --no-dev -o'
      - 'npm ci && npm run prod'
      - 'php artisan vapor-deploy:remove-node-modules'
      - 'php artisan event:cache'
      - 'php artisan config:cache'
      - 'php artisan route:cache'
      - 'php artisan view:cache'
      - 'php artisan optimize'
  staging:
    memory: 1024
    cli-memory: 512
    runtime: 'php-7.4:al2'
    timeout: 5
    build:
      - 'composer install --no-dev -o'
      - 'npm ci && npm run prod'
      - 'php artisan vapor-deploy:remove-node-modules'
      - 'php artisan event:cache'
      - 'php artisan config:cache'
      - 'php artisan route:cache'
      - 'php artisan view:cache'
      - 'php artisan optimize'
  production:
    memory: 1024
    cli-memory: 512
    runtime: 'php-7.4:al2'
    timeout: 5
    build:
      - 'composer install --no-dev -o'
      - 'npm ci && npm run prod'
      - 'php artisan vapor-deploy:remove-node-modules'
      - 'php artisan event:cache'
      - 'php artisan config:cache'
      - 'php artisan route:cache'
      - 'php artisan view:cache'
      - 'php artisan optimize'